{"ast":null,"code":"import _objectSpread from\"/Users/cdot/Desktop/Road To React book projects/reactWithFirebase/react-firebase-authentication/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/cdot/Desktop/Road To React book projects/reactWithFirebase/react-firebase-authentication/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/cdot/Desktop/Road To React book projects/reactWithFirebase/react-firebase-authentication/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/cdot/Desktop/Road To React book projects/reactWithFirebase/react-firebase-authentication/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/cdot/Desktop/Road To React book projects/reactWithFirebase/react-firebase-authentication/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/cdot/Desktop/Road To React book projects/reactWithFirebase/react-firebase-authentication/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{BrowserRouter,Switch,Route,Link}from\"react-router-dom\";import{compose}from\"recompose\";import{withFirebase}from\"../Firebase\";import{withAuthorization,withEmailVerification}from\"../Session\";import*as ROLES from\"../../constants/roles\";import*as ROUTES from\"../../constants/routes\";var AdminPage=function AdminPage(){return React.createElement(\"div\",{className:\"admin\"},React.createElement(\"h1\",null,\"Admin\"),React.createElement(\"p\",null,\"The Admin Page is accessible by every signed in admin user\"),React.createElement(\"hr\",null),React.createElement(BrowserRouter,null,React.createElement(Switch,null,React.createElement(Route,{exact:true,path:ROUTES.ADMIN_DETAILS,component:UserItem}),React.createElement(Route,{exact:true,path:ROUTES.ADMIN,component:UserList}))));};var UserListBase=/*#__PURE__*/function(_Component){_inherits(UserListBase,_Component);function UserListBase(props){var _this;_classCallCheck(this,UserListBase);_this=_possibleConstructorReturn(this,_getPrototypeOf(UserListBase).call(this,props));_this.state={loading:false,users:[]};return _this;}_createClass(UserListBase,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.setState({loading:true});this.props.firebase.users().on(\"value\",function(snapshot){var usersObject=snapshot.val();var usersList=Object.keys(usersObject).map(function(key){return _objectSpread({},usersObject[key],{uid:key});});_this2.setState({users:usersList,loading:false});});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.props.firebase.users().off();}},{key:\"render\",value:function render(){var _this$state=this.state,users=_this$state.users,loading=_this$state.loading;return React.createElement(\"div\",{className:\"users\"},React.createElement(\"h2\",null,\"Users\"),loading&&React.createElement(\"div\",null,\"Loading...\"),React.createElement(\"ul\",null,users.map(function(user){return React.createElement(\"li\",{key:user.uid},React.createElement(\"span\",null,React.createElement(\"strong\",null,\"ID: \"),\" \",user.uid),React.createElement(\"span\",null,React.createElement(\"strong\",null,\"E-Mail: \"),\" \",user.email),React.createElement(\"span\",null,React.createElement(\"strong\",null,\"Username: \"),\" \",user.username),React.createElement(\"span\",null,React.createElement(Link,{to:{pathname:\"\".concat(ROUTES.ADMIN,\"/\").concat(user.uid),state:{user:user}}},\"Details\")));})));}}]);return UserListBase;}(Component);var UserItemBase=/*#__PURE__*/function(_Component2){_inherits(UserItemBase,_Component2);function UserItemBase(props){var _this3;_classCallCheck(this,UserItemBase);_this3=_possibleConstructorReturn(this,_getPrototypeOf(UserItemBase).call(this,props));_this3.onSendPasswordResetEmail=function(){_this3.props.firebase.doPasswordReset(_this3.state.user.email);};_this3.state=_objectSpread({loading:false,user:null},props.location.state);return _this3;}_createClass(UserItemBase,[{key:\"componentDidMount\",value:function componentDidMount(){var _this4=this;if(this.state.user){return;}this.setState({loading:true});this.props.firebase.user(this.props.match.params.id).on(\"value\",function(snapshot){_this4.setState({user:snapshot.val(),loading:false});});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.props.firebase.user(this.props.match.params.id).off();}},{key:\"render\",value:function render(){var _this$state2=this.state,user=_this$state2.user,loading=_this$state2.loading;return React.createElement(\"div\",{className:\"users\"},React.createElement(\"h2\",null,\"User (\",this.props.match.params.id,\")\"),loading&&React.createElement(\"div\",null,\"Loading...\"),user&&React.createElement(\"div\",null,React.createElement(\"span\",null,React.createElement(\"strong\",null,\"ID: \"),\" \",user.uid),React.createElement(\"span\",null,React.createElement(\"strong\",null,\"E-Mail: \"),\" \",user.email),React.createElement(\"span\",null,React.createElement(\"strong\",null,\"Username: \"),\" \",user.username),React.createElement(\"span\",null,React.createElement(\"button\",{type:\"button\",onClick:this.onSendPasswordResetEmail},\"Send Password Reset\"))));}}]);return UserItemBase;}(Component);// const UserList = ({ users }) => (\n//   <ul>\n//     {users.map(user => (\n//       <li key={user.uid}>\n//         <span>\n//           <strong>ID: </strong> {user.uid}\n//         </span>\n//         <span>\n//           <strong>E-Mail: </strong> {user.email}\n//         </span>\n//         <span>\n//           <strong>Username: </strong> {user.username}\n//         </span>\n//       </li>\n//     ))}\n//   </ul>\n// );\nvar condition=function condition(authUser){return authUser&&!!authUser.roles[ROLES.ADMIN];};var UserList=withFirebase(UserListBase);var UserItem=withFirebase(UserItemBase);// const UserItem = ({ match }) => (\n//   <div>\n//     <h2>User ({match.params.id})</h2>\n//   </div>\n// );\nexport default compose(withEmailVerification,withAuthorization(condition))(AdminPage);","map":{"version":3,"sources":["/Users/cdot/Desktop/Road To React book projects/reactWithFirebase/react-firebase-authentication/src/components/Admin/index.js"],"names":["React","Component","BrowserRouter","Switch","Route","Link","compose","withFirebase","withAuthorization","withEmailVerification","ROLES","ROUTES","AdminPage","ADMIN_DETAILS","UserItem","ADMIN","UserList","UserListBase","props","state","loading","users","setState","firebase","on","snapshot","usersObject","val","usersList","Object","keys","map","key","uid","off","user","email","username","pathname","UserItemBase","onSendPasswordResetEmail","doPasswordReset","location","match","params","id","condition","authUser","roles"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { BrowserRouter, Switch, Route, Link } from \"react-router-dom\";\nimport { compose } from \"recompose\";\n\nimport { withFirebase } from \"../Firebase\";\nimport { withAuthorization, withEmailVerification } from \"../Session\";\nimport * as ROLES from \"../../constants/roles\";\nimport * as ROUTES from \"../../constants/routes\";\n\nconst AdminPage = () => (\n  <div className=\"admin\">\n    <h1>Admin</h1>\n    <p>The Admin Page is accessible by every signed in admin user</p>\n    <hr />\n\n    <BrowserRouter>\n      <Switch>\n        <Route exact path={ROUTES.ADMIN_DETAILS} component={UserItem} />\n        <Route exact path={ROUTES.ADMIN} component={UserList} />\n      </Switch>\n    </BrowserRouter>\n  </div>\n);\n\nclass UserListBase extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      loading: false,\n      users: []\n    };\n  }\n\n  componentDidMount() {\n    this.setState({ loading: true });\n\n    this.props.firebase.users().on(\"value\", snapshot => {\n      const usersObject = snapshot.val();\n\n      const usersList = Object.keys(usersObject).map(key => ({\n        ...usersObject[key],\n        uid: key\n      }));\n\n      this.setState({\n        users: usersList,\n        loading: false\n      });\n    });\n  }\n\n  componentWillUnmount() {\n    this.props.firebase.users().off();\n  }\n\n  render() {\n    const { users, loading } = this.state;\n\n    return (\n      <div className=\"users\">\n        <h2>Users</h2>\n        {loading && <div>Loading...</div>}\n        <ul>\n          {users.map(user => (\n            <li key={user.uid}>\n              <span>\n                <strong>ID: </strong> {user.uid}\n              </span>\n              <span>\n                <strong>E-Mail: </strong> {user.email}\n              </span>\n              <span>\n                <strong>Username: </strong> {user.username}\n              </span>\n              <span>\n                <Link\n                  to={{\n                    pathname: `${ROUTES.ADMIN}/${user.uid}`,\n                    state: { user }\n                  }}\n                >\n                  Details\n                </Link>\n              </span>\n            </li>\n          ))}\n        </ul>\n      </div>\n    );\n  }\n}\n\nclass UserItemBase extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      loading: false,\n      user: null,\n      ...props.location.state\n    };\n  }\n\n  componentDidMount() {\n    if (this.state.user) {\n      return;\n    }\n\n    this.setState({ loading: true });\n\n    this.props.firebase\n      .user(this.props.match.params.id)\n      .on(\"value\", snapshot => {\n        this.setState({\n          user: snapshot.val(),\n          loading: false\n        });\n      });\n  }\n\n  componentWillUnmount() {\n    this.props.firebase.user(this.props.match.params.id).off();\n  }\n\n  onSendPasswordResetEmail = () => {\n    this.props.firebase.doPasswordReset(this.state.user.email);\n  };\n\n  render() {\n    const { user, loading } = this.state;\n\n    return (\n      <div className=\"users\">\n        <h2>User ({this.props.match.params.id})</h2>\n\n        {loading && <div>Loading...</div>}\n\n        {user && (\n          <div>\n            <span>\n              <strong>ID: </strong> {user.uid}\n            </span>\n            <span>\n              <strong>E-Mail: </strong> {user.email}\n            </span>\n            <span>\n              <strong>Username: </strong> {user.username}\n            </span>\n            <span>\n              <button type=\"button\" onClick={this.onSendPasswordResetEmail}>\n                Send Password Reset\n              </button>\n            </span>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\n// const UserList = ({ users }) => (\n//   <ul>\n//     {users.map(user => (\n//       <li key={user.uid}>\n//         <span>\n//           <strong>ID: </strong> {user.uid}\n//         </span>\n//         <span>\n//           <strong>E-Mail: </strong> {user.email}\n//         </span>\n//         <span>\n//           <strong>Username: </strong> {user.username}\n//         </span>\n//       </li>\n//     ))}\n//   </ul>\n// );\n\nconst condition = authUser => authUser && !!authUser.roles[ROLES.ADMIN];\n\nconst UserList = withFirebase(UserListBase);\nconst UserItem = withFirebase(UserItemBase);\n\n// const UserItem = ({ match }) => (\n//   <div>\n//     <h2>User ({match.params.id})</h2>\n//   </div>\n// );\n\nexport default compose(\n  withEmailVerification,\n  withAuthorization(condition)\n)(AdminPage);\n"]},"metadata":{},"sourceType":"module"}